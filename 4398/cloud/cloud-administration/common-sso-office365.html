



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Migrating from OAuth to OpenID Connect &mdash; Mattermost 5.34 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  
    <link rel="canonical" href="https://docs.mattermost.com/cloud/cloud-administration/common-sso-office365.html" />
    <link rel="search" title="Search" href="../../search.html" />
  
  	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-K874RWM');</script>
	<!-- End Google Tag Manager -->

	
    <script src="../../_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav">

	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K874RWM"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Mattermost
          

          
          </a>

          
            
            
              <div class="version">
                5.34
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/cloud-admin-guide.html">Cloud Administrator's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/administrator.html">Self-Managed Administrator's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/user.html">User's Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://developers.mattermost.com/">Developer's Guide</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Mattermost</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          


  


<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
    
    <li>Migrating from OAuth to OpenID Connect</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/mattermost/docs/blob/master/source/cloud/cloud-administration/common-sso-office365.rst" class="fa fa-github"> Edit</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <article class="document" itemscope="itemscope" itemtype="https://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="migrating-from-oauth-to-openid-connect">
<h1>Migrating from OAuth to OpenID Connect<a class="headerlink" href="#migrating-from-oauth-to-openid-connect" title="Permalink to this headline">¶</a></h1>
<p>OAuth 2.0 is being deprecated and replaced by OpenID Connect. Refer to the product documentation to <a class="reference external" href="https://docs.mattermost.com/cloud/cloud-administration/converting-oauth-2.0-to-openid-connect.html">convert your existing OAuth 2.0 service provider configuration</a> for Office 365 to the OpenID Connect standard.</p>
</div>
<div class="section" id="configuring-office-365-as-a-single-sign-on-sso-service">
<h1>Configuring Office 365 as a Single Sign-On (SSO) service<a class="headerlink" href="#configuring-office-365-as-a-single-sign-on-sso-service" title="Permalink to this headline">¶</a></h1>
<p>Follow these steps to configure Mattermost to use your Office 365 logon credentials and Azure Active Directory account as a Single Sign-on (SSO) service for team creation, account creation, and sign-in.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The system must be using SSL as Microsoft only allows OAuth redirect URIs that are SSL-enabled.</p>
</div>
<div class="section" id="step-1-register-an-application-in-azure-portal">
<h2>Step 1: Register an application in Azure Portal<a class="headerlink" href="#step-1-register-an-application-in-azure-portal" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Log in to the <a class="reference external" href="https://portal.azure.com/">Azure Portal</a> with the account that relates to the Azure Active Directory tenant where you want to register the application. You can confirm the tenant in the top right corner of the portal.</li>
<li>In the left-hand navigation pane, select the <strong>Azure Active Directory service</strong>, then select <strong>App registrations &gt; New registration</strong>.</li>
<li>Give your new registration a <strong>Name</strong>.</li>
<li>Define which <strong>Supported account types</strong> can access the application. For example, if this is to be only accessed from your enterprise’s Azure AD accounts, then select <strong>Accounts in this organizational directory only</strong>.</li>
<li>Define the <strong>Redirect URI</strong> as Web client, then input the URL with the host name that will be specific to your Mattermost service followed by <code class="docutils literal notranslate"><span class="pre">/signup/office365/complete</span></code>. An example below is: <code class="docutils literal notranslate"><span class="pre">https://your.mattermost.com/signup/office365/complete</span></code></li>
</ol>
<img alt="../../_images/AzureApp_New_Registration.png" src="../../_images/AzureApp_New_Registration.png" />
<img alt="../../_images/AzureApp_SetupMenuv2.png" src="../../_images/AzureApp_SetupMenuv2.png" />
<p>Once the App Registration has been created, you can configure it further. See the standard <a class="reference external" href="https://docs.microsoft.com/en-gb/azure/active-directory/develop/quickstart-register-app">Azure AD documentation</a> for reference.</p>
</div>
<div class="section" id="step-2-generate-a-new-client-secret-in-azure-portal">
<h2>Step 2: Generate a new client secret in Azure Portal<a class="headerlink" href="#step-2-generate-a-new-client-secret-in-azure-portal" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In the Azure Portal, select <strong>Certificates and Secrets</strong> from the menu, then select the button to generate a <strong>New Client secret</strong>.</li>
<li>Provide a description, define the expiry for the token, then select <strong>Add</strong>.</li>
<li>In Azure Portal, select <strong>Overview</strong> from the menu, then copy and paste both the Application (client) ID and the Directory (tenant) ID to a temporary location. You will enter these values as an <strong>Application ID</strong> and as part of an <strong>Auth Endpoint</strong> and <strong>Token Endpoint</strong> URL in the Mattermost System Console.</li>
</ol>
<img alt="../../_images/AzureApp_Client_Secret_Expiry.png" src="../../_images/AzureApp_Client_Secret_Expiry.png" />
<img alt="../../_images/AzureApp_App_Directory_IDsv2.png" src="../../_images/AzureApp_App_Directory_IDsv2.png" />
</div>
<div class="section" id="step-3-configure-mattermost-for-office-365-sso">
<h2>Step 3: Configure Mattermost for Office 365 SSO<a class="headerlink" href="#step-3-configure-mattermost-for-office-365-sso" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Log in to Mattermost, then go to <strong>System Console &gt; Authentication &gt; OpenID Connect</strong>.</li>
<li>Select <strong>Office 365</strong> as the service provider.</li>
<li>Paste the <strong>Directory (tenant) ID</strong> from the Azure Portal as the <strong>Directory (tenant) ID</strong> in Mattermost.</li>
<li>The <strong>Discovery Endpoint</strong> for OpenID Connect with Office 365 is prepopulated with <code class="docutils literal notranslate"><span class="pre">https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration</span></code>.</li>
<li>Paste the <strong>Application (client) ID</strong> from the Azure Portal as the <strong>Client ID</strong> in Mattermost.</li>
<li>Paste the <strong>client secret</strong> value from the Azure Portal as the <strong>Client Secret</strong> in Mattermost.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
</div>
<div class="section" id="note-about-microsoft-active-directory-tenants">
<h2>Note about Microsoft Active Directory Tenants<a class="headerlink" href="#note-about-microsoft-active-directory-tenants" title="Permalink to this headline">¶</a></h2>
<p>A Microsoft Active Directory (AD) tenant is a dedicated instance of Azure Active Directory (Azure AD) that you own and would have received when signing up for a Microsoft cloud service such as Azure or Office 365. Tenants are commonly used by organizations who want to store information about their users such as passwords, user profile data, and permissions. You can learn more about <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/active-directory-howto-tenant">getting an Azure AD tenant here</a>.</p>
<p>To allow your Azure AD users to sign in to Mattermost using Office 365 SSO, you must register Mattermost in the Microsoft Azure AD tenant that contains the users’ information. The registration can be done from the <a class="reference external" href="https://manage.windowsazure.com/">Microsoft Azure portal</a>. The steps to register the Mattermost account in the tenant should be similar to those provided above, and you can find more information about <a class="reference external" href="https://azure.microsoft.com/en-us/documentation/articles/active-directory-integrating-applications/">integrating apps with Azure AD here</a>.</p>
<p>If you don’t register Mattermost in the Microsoft Azure AD tenant your organization uses, Office 365 SSO will likely fail for your users.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you do not use Azure Active Directory, you may register Mattermost with your Office 365 or Azure account (a personal, work, or school account), then set up Office 365 SSO with Mattermost using the steps provided above.</p>
</div>
</div>
</div>


           </div>
           
          </article>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020 Mattermost

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
 




<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-cog">&nbsp;&nbsp;Options</span>&nbsp;
        <span class="fa fa-angle-up"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Contribute</dt>
            <dd>
                <a href="https://github.com/mattermost/docs/issues">Report a Problem</a>
            </dd>
            
            <dd>
                <a href="https://github.com/mattermost/docs/blob/master/source/cloud/cloud-administration/common-sso-office365.rst"> Edit on GitHub</a>
            </dd>
            
        </dl>
    </div>
</div>


  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/myscript.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

	<script type="text/javascript">
		jQuery(function () {
			SphinxRtdTheme.Navigation.enable(true);
		});
	</script> 

<header>
	<div class="header__container">
		<div class="search__icon">
			<i class="fa fa-search"></i>
		</div>
		<a href="https://docs.mattermost.com/" class="header__logo">
			<img width="176" src="https://about.mattermost.com/wp-content/uploads/2017/08/Mattermost-Logo-Blue.svg">
		</a>
		<div class="links__icon">
			<i class="fa fa-bars"></i>
		</div>
		<ul class="header__links">
			<li><a href="https://developers.mattermost.com/">Developers</a></li>
			<li><a href="https://mattermost.com/features/">Product</a></li>
			<li><a href="https://mattermost.com/pricing/">Pricing</a></li>
			<li><a href="https://mattermost.com/blog/">Blog</a></li>
			<li><a href="https://mattermost.com/download/">Download</a></li>
			<li><a href="https://mattermost.com/trial/">Trial</a></li>
		</ul>
		<div class="header__searchbar">
			<form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
                <input type="text" name="q" placeholder="Search by keyword" autofocus />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
		</div>
	</div>
</header>

</body>
</html>